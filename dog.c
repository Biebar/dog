#include <unistd.h>


int main(e,t,b,a)
struct l {struct l *a, *b} b,a,*t;
{
	return e <= 0 & e
               && (write(a.a,
		       (t&&main(e,t->a,b,a))*(long)&t->b,
		       (t&&((a.b=(long)t->b>>56),1))*((long)a.b-(long)a.a)+(long)a.a
		      ),
		 -e)
               || (e > 1
                  && !main((a.a&&((b.a=0),1)||(b.a=a.b),e-1),
			    t,b,0,&b,
			    (*(long*)(b.a=((void**)t)[e-1])&((unsigned long)-1>>48)^45)
			    &&(b.b=open(b.a,0))||(b.b=0)
			    )
                  || (e < 0
                     && ((t && main(main(e+1,t->b,b,0,a.b)-3,t->a,b,a)),1)
                     || (e & 1
                        && !main(0,b,0,a.b,a.b,a.a&&(a.b=&b),b.a=b.b=0)
                        || (b.b = (long)read(a.a->b, &b.b, 7)<<56 | ((long)b.b & ((unsigned long)-1>>8)),
			  (long)b.b>>56
                          && !main(t-(b.a=t), &b,b,a)
                          || (b.a = (a.a->b
                                     && close(a.a->b)
                                     ,t),
                             a.a->b = &b,
                             a.a->a
                             && !main(e,e,b,a.a->a,a.b)
                             || main(-2,a.b,b,a
			       ))))),0)

        ;
}

